<app-header></app-header>
<div class="row py-2">
  <div class="col-sm-12 text-center my-2">
    <h4 class="text-warning">My Shopping Bag</h4>
  </div>
  <div *ngIf="cartProduct.length == 0" class="col-sm-12 text-center mb-2">
    <h6 class="text-primary border shadow-sm d-inline px-md-4">No Items Selected.</h6>
    <div class="d-flex col-sm-12 justify-content-center mt-4">
      <button class="btn border bg-primary text-light p-1 btn-sm" routerLink="/home">Add Items</button>
    </div>
  </div>
  <div *ngIf="cartProduct.length!==0" class="row mt-4 mb-2 overflow-auto px-0">
    <div class="table-responsive col-md-8 mx-4">
      <table class="table table-bordered table-striped table-hover">
        <thead class="bg-dark text-light">
          <tr class="text-center">
            <th scope="col" colspan="2">Product Name</th>
            <th scope="col">Quantity</th>
            <th scope="col">Price details</th>
            <th scope="col">Order Total</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr class="text-center" *ngFor="let prod of cartProduct; let i=index">
            <th class="text-left" scope="col" colspan="2">{{prod.productName}} <img src="{{prod.productImage}}"
                style="width:fit-content; height:38px; cursor: pointer;" class="ms-2" (click)='selectItem(prod)'></th>
            <td>{{prod.productQuantity}}</td>
            <td>{{prod.productPrice | currency}}</td>
            <td>{{prod.productPrice*prod.productQuantity | currency}}</td>
            <td>
              <p (click)='removeProduct(prod)' style="cursor: pointer;"><i
                  class="fa fa-times text-danger me-2"></i>Remove Item</p>
            </td>
          </tr>
          <tr>
            <th scope="col" colspan="4" class="text-center">Total</th>
            <td class="text-primary text-center">&#36;{{grandTotal}}</td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <div class="d-flex" [ngClass]="cartProduct.length == 0 ? 'col-sm-12 justify-content-center':'col-sm-12 justify-content-end mt-2'">
        <button class="btn border bg-primary text-light p-1 btn-sm" routerLink="/home">Add Items</button>
      </div>
    </div>
    <div class="col-md-3 ms-3">
      <div class="d-flex justify-content-center">
        <h6 class="text-primary mb-3"><small>Click on product image to view details</small></h6>
      </div>
      <div *ngIf="isItemSelected">
        <div class="card text-center shadow-sm bg-white rounded mb-4">
          <img class="card-img-top shadow-sm bg-white rounded" src={{selectedItem.productImage}} alt="product-image"
            alt="product-image" style="height:38vh">
          <div class="card-body">
            <h6 class="card-title font-weight-bold p-0 mt-1">{{selectedItem.productName}}</h6>
            <div class="bg-white rounded">
              <p class="card-text mb-0 text-primary pb-1 mb-1">Selected Qty = {{selectedItem.productQuantity}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
